{"version":3,"mappings":"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","names":["styles","css","__decorate","decorators","target","key","desc","c","r","d","i","SCROLL_LOCK","W3mModal","LitElement","ModalController","AccountController","OptionsController","ApiController","val","EventsController","unsubscribe","html","event","isSiweSignScreen","RouterController","isApproveSignScreen","SIWEController","themeVariables","themeMode","ThemeController","defaultThemeMode","UiHelperUtil","initializeTheming","SnackController","styleTag","card","_a","tagName","caipAddress","previousAddress","CoreHelperUtil","newAddress","previousNetworkId","newNetworkId","session","_b","state","customElement"],"ignoreList":[0,1],"sources":["../../node_modules/@web3modal/scaffold-ui/dist/esm/src/modal/w3m-modal/styles.js","../../node_modules/@web3modal/scaffold-ui/dist/esm/src/modal/w3m-modal/index.js"],"sourcesContent":["import { css } from 'lit';\nexport default css `\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n`;\n//# sourceMappingURL=styles.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AccountController, ApiController, CoreHelperUtil, EventsController, ModalController, OptionsController, RouterController, SnackController, ThemeController } from '@web3modal/core';\nimport { UiHelperUtil, customElement, initializeTheming } from '@web3modal/ui';\nimport { LitElement, html } from 'lit';\nimport { state } from 'lit/decorators.js';\nimport styles from './styles.js';\nconst SCROLL_LOCK = 'scroll-lock';\nlet W3mModal = class W3mModal extends LitElement {\n    constructor() {\n        super();\n        this.unsubscribe = [];\n        this.abortController = undefined;\n        this.open = ModalController.state.open;\n        this.caipAddress = AccountController.state.caipAddress;\n        this.isSiweEnabled = OptionsController.state.isSiweEnabled;\n        this.connected = AccountController.state.isConnected;\n        this.loading = ModalController.state.loading;\n        this.shake = ModalController.state.shake;\n        this.initializeTheming();\n        ApiController.prefetch();\n        this.unsubscribe.push(...[\n            ModalController.subscribeKey('open', val => (val ? this.onOpen() : this.onClose())),\n            ModalController.subscribeKey('shake', val => (this.shake = val)),\n            ModalController.subscribeKey('loading', val => {\n                this.loading = val;\n                this.onNewAddress(AccountController.state.caipAddress);\n            }),\n            AccountController.subscribeKey('isConnected', val => (this.connected = val)),\n            AccountController.subscribeKey('caipAddress', val => this.onNewAddress(val)),\n            OptionsController.subscribeKey('isSiweEnabled', val => (this.isSiweEnabled = val))\n        ]);\n        EventsController.sendEvent({ type: 'track', event: 'MODAL_LOADED' });\n    }\n    disconnectedCallback() {\n        this.unsubscribe.forEach(unsubscribe => unsubscribe());\n        this.onRemoveKeyboardListener();\n    }\n    render() {\n        return this.open\n            ? html `\n          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid=\"w3m-modal-overlay\">\n            <wui-card\n              shake=\"${this.shake}\"\n              role=\"alertdialog\"\n              aria-modal=\"true\"\n              tabindex=\"0\"\n              data-testid=\"w3m-modal-card\"\n            >\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        `\n            : null;\n    }\n    async onOverlayClick(event) {\n        if (event.target === event.currentTarget) {\n            await this.handleClose();\n        }\n    }\n    async handleClose() {\n        const isSiweSignScreen = RouterController.state.view === 'ConnectingSiwe';\n        const isApproveSignScreen = RouterController.state.view === 'ApproveTransaction';\n        if (this.isSiweEnabled) {\n            const { SIWEController } = await import('@web3modal/siwe');\n            const isUnauthenticated = SIWEController.state.status !== 'success';\n            if (isUnauthenticated && (isSiweSignScreen || isApproveSignScreen)) {\n                ModalController.shake();\n            }\n            else {\n                ModalController.close();\n            }\n        }\n        else {\n            ModalController.close();\n        }\n    }\n    initializeTheming() {\n        const { themeVariables, themeMode } = ThemeController.state;\n        const defaultThemeMode = UiHelperUtil.getColorTheme(themeMode);\n        initializeTheming(themeVariables, defaultThemeMode);\n    }\n    onClose() {\n        this.open = false;\n        this.classList.remove('open');\n        this.onScrollUnlock();\n        SnackController.hide();\n        this.onRemoveKeyboardListener();\n    }\n    onOpen() {\n        this.open = true;\n        this.classList.add('open');\n        this.onScrollLock();\n        this.onAddKeyboardListener();\n    }\n    onScrollLock() {\n        const styleTag = document.createElement('style');\n        styleTag.dataset['w3m'] = SCROLL_LOCK;\n        styleTag.textContent = `\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    `;\n        document.head.appendChild(styleTag);\n    }\n    onScrollUnlock() {\n        const styleTag = document.head.querySelector(`style[data-w3m=\"${SCROLL_LOCK}\"]`);\n        if (styleTag) {\n            styleTag.remove();\n        }\n    }\n    onAddKeyboardListener() {\n        this.abortController = new AbortController();\n        const card = this.shadowRoot?.querySelector('wui-card');\n        card?.focus();\n        window.addEventListener('keydown', event => {\n            if (event.key === 'Escape') {\n                this.handleClose();\n            }\n            else if (event.key === 'Tab') {\n                const { tagName } = event.target;\n                if (tagName && !tagName.includes('W3M-') && !tagName.includes('WUI-')) {\n                    card?.focus();\n                }\n            }\n        }, this.abortController);\n    }\n    onRemoveKeyboardListener() {\n        this.abortController?.abort();\n        this.abortController = undefined;\n    }\n    async onNewAddress(caipAddress) {\n        if (!this.connected || this.loading) {\n            return;\n        }\n        const previousAddress = CoreHelperUtil.getPlainAddress(this.caipAddress);\n        const newAddress = CoreHelperUtil.getPlainAddress(caipAddress);\n        const previousNetworkId = CoreHelperUtil.getNetworkId(this.caipAddress);\n        const newNetworkId = CoreHelperUtil.getNetworkId(caipAddress);\n        this.caipAddress = caipAddress;\n        if (this.isSiweEnabled) {\n            const { SIWEController } = await import('@web3modal/siwe');\n            const session = await SIWEController.getSession();\n            if (session && previousAddress && newAddress && previousAddress !== newAddress) {\n                if (SIWEController.state._client?.options.signOutOnAccountChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            if (session && previousNetworkId && newNetworkId && previousNetworkId !== newNetworkId) {\n                if (SIWEController.state._client?.options.signOutOnNetworkChange) {\n                    await SIWEController.signOut();\n                    this.onSiweNavigation();\n                }\n                return;\n            }\n            this.onSiweNavigation();\n        }\n    }\n    onSiweNavigation() {\n        if (this.open) {\n            RouterController.push('ConnectingSiwe');\n        }\n        else {\n            ModalController.open({\n                view: 'ConnectingSiwe'\n            });\n        }\n    }\n};\nW3mModal.styles = styles;\n__decorate([\n    state()\n], W3mModal.prototype, \"open\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"caipAddress\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"isSiweEnabled\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"connected\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"loading\", void 0);\n__decorate([\n    state()\n], W3mModal.prototype, \"shake\", void 0);\nW3mModal = __decorate([\n    customElement('w3m-modal')\n], W3mModal);\nexport { W3mModal };\n//# sourceMappingURL=index.js.map"],"file":"assets/w3m-modal-BVRygj0i.js"}